{"file_contents":{"vite.config.js":{"content":"import { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\n\nexport default defineConfig({\n  plugins: [react()],\n  server: {\n    host: '0.0.0.0',\n    port: 5000,\n    allowedHosts: true,\n    proxy: {\n      '/api': {\n        target: 'http://localhost:8000',\n        changeOrigin: true,\n      }\n    }\n  }\n})\n","size_bytes":322},"main.py":{"content":"from flask import Flask, request, jsonify\nfrom flask_cors import CORS\nimport pdfplumber\nimport re\nimport io\nimport requests\nimport time\nimport os\nimport json\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\napp = Flask(__name__)\nCORS(app)\n\ndef parse_cfpb_sample(text):\n    \"\"\"\n    Parse CFPB sample credit card statement.\n    Extracts 12+ key data points using comprehensive regex patterns.\n    \"\"\"\n    data = {\n        \"Total Balance Due\": \"N/A\",\n        \"Payment Due Date\": \"N/A\",\n        \"Minimum Payment Due\": \"N/A\",\n        \"Card Last 4 Digits\": \"N/A\",\n        \"Billing Cycle Dates\": \"N/A\",\n        \"Previous Balance\": \"N/A\",\n        \"Payments, Credits\": \"N/A\",\n        \"Purchases\": \"N/A\",\n        \"Interest Charged\": \"N/A\",\n        \"Credit Access Line\": \"N/A\",\n        \"Available Credit\": \"N/A\",\n        \"Annual Percentage Rate\": \"N/A\"\n    }\n    \n    try:\n        new_balance_pattern = r\"New Balance[:\\s]*\\$?([\\d,]+\\.?\\d*)\"\n        match = re.search(new_balance_pattern, text, re.IGNORECASE)\n        if match:\n            data[\"Total Balance Due\"] = f\"${match.group(1)}\"\n        \n        payment_due_pattern = r\"Payment Due Date[:\\s]*(\\d{1,2}/\\d{1,2}/\\d{2,4})\"\n        match = re.search(payment_due_pattern, text, re.IGNORECASE)\n        if match:\n            data[\"Payment Due Date\"] = match.group(1)\n        \n        min_payment_pattern = r\"Minimum Payment Due[:\\s]*\\$?([\\d,]+\\.?\\d*)\"\n        match = re.search(min_payment_pattern, text, re.IGNORECASE)\n        if match:\n            data[\"Minimum Payment Due\"] = f\"${match.group(1)}\"\n        \n        account_pattern = r\"Account Number[:\\s]*.*?(\\d{4})\"\n        match = re.search(account_pattern, text, re.IGNORECASE)\n        if match:\n            data[\"Card Last 4 Digits\"] = match.group(1)\n        \n        billing_cycle_pattern = r\"(?:Opening|Closing).*?Date[:\\s]*(\\d{1,2}/\\d{1,2}/\\d{2,4}).*?(\\d{1,2}/\\d{1,2}/\\d{2,4})\"\n        match = re.search(billing_cycle_pattern, text, re.IGNORECASE | re.DOTALL)\n        if match:\n            data[\"Billing Cycle Dates\"] = f\"{match.group(1)} - {match.group(2)}\"\n        \n        prev_balance_pattern = r\"Previous Balance[:\\s]*\\$?([\\d,]+\\.?\\d*)\"\n        match = re.search(prev_balance_pattern, text, re.IGNORECASE)\n        if match:\n            data[\"Previous Balance\"] = f\"${match.group(1)}\"\n        \n        payments_pattern = r\"Payments,?\\s*Credits?[:\\s]*\\$?([\\d,]+\\.?\\d*)\"\n        match = re.search(payments_pattern, text, re.IGNORECASE)\n        if match:\n            data[\"Payments, Credits\"] = f\"${match.group(1)}\"\n        \n        purchases_pattern = r\"Purchases[:\\s]*\\$?([\\d,]+\\.?\\d*)\"\n        match = re.search(purchases_pattern, text, re.IGNORECASE)\n        if match:\n            data[\"Purchases\"] = f\"${match.group(1)}\"\n        \n        interest_pattern = r\"Interest Charged[:\\s]*\\$?([\\d,]+\\.?\\d*)\"\n        match = re.search(interest_pattern, text, re.IGNORECASE)\n        if match:\n            data[\"Interest Charged\"] = f\"${match.group(1)}\"\n        \n        credit_limit_pattern = r\"Credit (?:Access )?Line[:\\s]*\\$?([\\d,]+\\.?\\d*)\"\n        match = re.search(credit_limit_pattern, text, re.IGNORECASE)\n        if match:\n            data[\"Credit Access Line\"] = f\"${match.group(1)}\"\n        \n        available_credit_pattern = r\"Available Credit[:\\s]*\\$?([\\d,]+\\.?\\d*)\"\n        match = re.search(available_credit_pattern, text, re.IGNORECASE)\n        if match:\n            data[\"Available Credit\"] = f\"${match.group(1)}\"\n        \n        apr_pattern = r\"Annual Percentage Rate.*?Purchase.*?([\\d.]+)%\"\n        match = re.search(apr_pattern, text, re.IGNORECASE | re.DOTALL)\n        if match:\n            data[\"Annual Percentage Rate\"] = f\"{match.group(1)}%\"\n    \n    except Exception as e:\n        print(f\"Error parsing CFPB sample: {str(e)}\")\n    \n    return data\n\ndef parse_chase(text):\n    \"\"\"Demo function for Chase statements - returns placeholder data\"\"\"\n    return {\n        \"Total Balance Due\": \"N/A (Demo)\",\n        \"Payment Due Date\": \"N/A (Demo)\",\n        \"Minimum Payment Due\": \"N/A (Demo)\",\n        \"Card Last 4 Digits\": \"N/A (Demo)\",\n        \"Billing Cycle Dates\": \"N/A (Demo)\",\n        \"Previous Balance\": \"N/A (Demo)\",\n        \"Payments, Credits\": \"N/A (Demo)\",\n        \"Purchases\": \"N/A (Demo)\",\n        \"Interest Charged\": \"N/A (Demo)\",\n        \"Credit Access Line\": \"N/A (Demo)\",\n        \"Available Credit\": \"N/A (Demo)\",\n        \"Annual Percentage Rate\": \"N/A (Demo)\"\n    }\n\ndef parse_amex(text):\n    \"\"\"Demo function for American Express statements - returns placeholder data\"\"\"\n    return parse_chase(text)\n\ndef parse_citi(text):\n    \"\"\"Demo function for Citi statements - returns placeholder data\"\"\"\n    return parse_chase(text)\n\ndef parse_capital_one(text):\n    \"\"\"Demo function for Capital One statements - returns placeholder data\"\"\"\n    return parse_chase(text)\n\ndef parse_discover(text):\n    \"\"\"Demo function for Discover statements - returns placeholder data\"\"\"\n    return parse_chase(text)\n\ndef parse_statement(text, issuer):\n    \"\"\"\n    Router function that directs to the appropriate parser based on issuer.\n    \"\"\"\n    issuer_lower = issuer.lower()\n    \n    if \"cfpb\" in issuer_lower:\n        return parse_cfpb_sample(text)\n    elif \"chase\" in issuer_lower:\n        return parse_chase(text)\n    elif \"american express\" in issuer_lower or \"amex\" in issuer_lower:\n        return parse_amex(text)\n    elif \"citi\" in issuer_lower:\n        return parse_citi(text)\n    elif \"capital one\" in issuer_lower:\n        return parse_capital_one(text)\n    elif \"discover\" in issuer_lower:\n        return parse_discover(text)\n    else:\n        return parse_cfpb_sample(text)\n\n@app.route('/api/parse', methods=['POST'])\ndef parse_pdf():\n    \"\"\"\n    Endpoint to parse uploaded PDF credit card statements.\n    Accepts a PDF file and issuer name, returns extracted data.\n    \"\"\"\n    try:\n        if 'file' not in request.files:\n            return jsonify({\"error\": \"No file provided\"}), 400\n        \n        file = request.files['file']\n        issuer = request.form.get('issuer', 'CFPB Sample')\n        \n        if file.filename == '':\n            return jsonify({\"error\": \"No file selected\"}), 400\n        \n        if not file.filename or not file.filename.endswith('.pdf'):\n            return jsonify({\"error\": \"Invalid file type. Please upload a PDF file.\"}), 400\n        \n        pdf_bytes = file.read()\n        pdf_file = io.BytesIO(pdf_bytes)\n        \n        text = \"\"\n        with pdfplumber.open(pdf_file) as pdf:\n            for page in pdf.pages:\n                text += page.extract_text() or \"\"\n        \n        if not text.strip():\n            return jsonify({\"error\": \"Could not extract text from PDF. Please ensure it's a text-based PDF.\"}), 400\n        \n        parsed_data = parse_statement(text, issuer)\n        \n        return jsonify({\"data\": parsed_data}), 200\n    \n    except Exception as e:\n        return jsonify({\"error\": f\"An error occurred while parsing the PDF: {str(e)}\"}), 500\n\ndef generate_insights_with_retry(parsed_data, budget_goal, max_retries=5):\n    \"\"\"\n    Generate AI insights using Google Gemini API with exponential backoff retry logic.\n    \n    Args:\n        parsed_data: Dictionary containing extracted statement data\n        budget_goal: User's monthly budget goal (string)\n        max_retries: Maximum number of retry attempts\n    \n    Returns:\n        String containing AI-generated insights\n    \"\"\"\n    api_key = os.getenv(\"GEMINI_API_KEY\", \"\")\n    \n    if not api_key:\n        return \"API key not configured. Please set the GEMINI_API_KEY environment variable.\"\n    \n    api_url = f\"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key={api_key}\"\n    \n    budget_context = \"The user has not set a budget goal.\"\n    if budget_goal and budget_goal.strip():\n        try:\n            float(budget_goal)\n            budget_context = f\"The user has set a monthly budget goal of ${budget_goal}. Please use this to personalize your advice.\"\n        except ValueError:\n            pass\n    \n    system_prompt = f\"You are a friendly financial assistant. A user has provided a *comprehensive summary* from their credit card statement (including balance, purchases, payments, and credit limit). {budget_context} Your task is to provide 2-3 brief, actionable, and encouraging insights based *only* on this data. Do not invent data. Format your response as a simple text paragraph. Be encouraging.\"\n    \n    user_query = f\"Here is my complete statement summary: {json.dumps(parsed_data)}. What are your insights?\"\n    \n    payload = {\n        \"system_instruction\": {\n            \"parts\": [{\"text\": system_prompt}]\n        },\n        \"contents\": [\n            {\n                \"parts\": [{\"text\": user_query}]\n            }\n        ]\n    }\n    \n    for attempt in range(max_retries):\n        try:\n            response = requests.post(\n                api_url,\n                headers={\"Content-Type\": \"application/json\"},\n                json=payload,\n                timeout=30\n            )\n            \n            if response.status_code == 200:\n                result = response.json()\n                if \"candidates\" in result and len(result[\"candidates\"]) > 0:\n                    if \"content\" in result[\"candidates\"][0]:\n                        if \"parts\" in result[\"candidates\"][0][\"content\"]:\n                            return result[\"candidates\"][0][\"content\"][\"parts\"][0][\"text\"]\n                return \"Unable to generate insights. Please try again.\"\n            \n            elif response.status_code == 429 or response.status_code >= 500:\n                if attempt < max_retries - 1:\n                    wait_time = (2 ** attempt) + (time.time() % 1)\n                    print(f\"Rate limited or server error. Retrying in {wait_time:.2f} seconds...\")\n                    time.sleep(wait_time)\n                    continue\n                else:\n                    return \"API rate limit exceeded. Please try again in a moment.\"\n            \n            else:\n                return f\"API Error: {response.status_code}. Please check your API key and try again.\"\n        \n        except requests.exceptions.Timeout:\n            if attempt < max_retries - 1:\n                wait_time = (2 ** attempt)\n                print(f\"Request timeout. Retrying in {wait_time} seconds...\")\n                time.sleep(wait_time)\n                continue\n            else:\n                return \"Request timeout. Please try again.\"\n        \n        except Exception as e:\n            if attempt < max_retries - 1:\n                wait_time = (2 ** attempt)\n                time.sleep(wait_time)\n                continue\n            else:\n                return f\"Error generating insights: {str(e)}\"\n    \n    return \"Unable to generate insights after multiple attempts. Please try again later.\"\n\n@app.route('/api/insights', methods=['POST'])\ndef get_insights():\n    \"\"\"\n    Endpoint to generate AI-powered financial insights.\n    Accepts extracted data and budget goal, returns personalized recommendations.\n    \"\"\"\n    try:\n        data = request.json\n        \n        if not data:\n            return jsonify({\"error\": \"No data provided\"}), 400\n        \n        parsed_data = data.get('extractedData')\n        budget_goal = data.get('budgetGoal', '')\n        \n        if not parsed_data:\n            return jsonify({\"error\": \"No extracted data provided\"}), 400\n        \n        insights_text = generate_insights_with_retry(parsed_data, budget_goal)\n        \n        return jsonify({\"insights\": insights_text}), 200\n    \n    except Exception as e:\n        return jsonify({\"error\": f\"An error occurred: {str(e)}\"}), 500\n\n@app.route('/health', methods=['GET'])\ndef health_check():\n    \"\"\"Health check endpoint\"\"\"\n    return jsonify({\"status\": \"healthy\"}), 200\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=8000, debug=True)\n","size_bytes":11834},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"google-genai>=1.49.0\",\n]\n","size_bytes":172},"README.md":{"content":"# AI-Powered Credit Card Statement Analyzer\n\nA professional full-stack web application that analyzes credit card statements using PDF parsing and AI-powered insights.\n\n![Portfolio Project](https://img.shields.io/badge/Portfolio-Project-blue)\n![React](https://img.shields.io/badge/React-19-61DAFB?logo=react)\n![Python](https://img.shields.io/badge/Python-3.11-3776AB?logo=python)\n![Flask](https://img.shields.io/badge/Flask-3.0-000000?logo=flask)\n\n## Features\n\n### Core Functionality\n- **PDF Upload & Parsing**: Drag-and-drop interface with support for multiple credit card issuers\n- **Data Extraction**: Automatically extracts 12+ key data points from credit card statements\n- **Budget Goal Setting**: Optional budget input for personalized financial recommendations\n- **AI-Powered Insights**: Google Gemini API integration for actionable financial advice\n\n### UI/UX\n- **Light/Dark Mode**: Toggle between themes with localStorage persistence\n- **Responsive Design**: Clean, modern interface using Tailwind CSS\n- **Professional Components**: Loading states, error handling, and visual feedback\n- **Interactive Elements**: \"How It Works\" modal explaining the technology stack\n\n## Technology Stack\n\n### Frontend\n- React 19 with Hooks\n- Vite (build tool and dev server)\n- Tailwind CSS (via CDN)\n- lucide-react (icons)\n- Inter font\n\n### Backend\n- Python 3.11\n- Flask (web framework)\n- pdfplumber (PDF text extraction)\n- Regular Expressions (regex parsing)\n- Google Gemini API (AI insights)\n- Exponential backoff retry logic\n\n## Getting Started\n\n### Prerequisites\n- Python 3.11\n- Node.js 20\n- Google Gemini API key (for AI insights feature)\n\n### Installation\n\n1. Install Python dependencies:\n```bash\npip install -r requirements.txt\n```\n\n2. Install Node.js dependencies:\n```bash\nnpm install\n```\n\n3. Set up environment variables:\n```bash\n# Create a .env file with your Gemini API key\necho \"GEMINI_API_KEY=your_api_key_here\" > .env\n```\n\n### Running the Application\n\nThe application uses two workflows:\n\n1. **Backend** (runs on port 8000):\n```bash\npython main.py\n```\n\n2. **Frontend** (runs on port 5000):\n```bash\nnpm run dev\n```\n\nAccess the application at `http://localhost:5000`\n\n## How to Use\n\n1. **Upload PDF**: Drag and drop your credit card statement PDF or click to browse\n2. **Select Issuer**: Choose your card issuer from the dropdown menu\n3. **Parse Statement**: Click \"Parse Statement\" to extract data from your PDF\n4. **View Results**: Review the extracted data displayed in clean data cards\n5. **Set Budget** (Optional): Enter your monthly budget goal\n6. **Get Insights**: Click \"Get AI Insights\" for personalized financial recommendations\n\n## Supported Credit Card Issuers\n\n- **CFPB Sample** (Working) - Full parsing with 12+ data points\n- Chase (Demo) - Placeholder data\n- American Express (Demo) - Placeholder data\n- Citi (Demo) - Placeholder data\n- Capital One (Demo) - Placeholder data\n- Discover (Demo) - Placeholder data\n\n## Extracted Data Points\n\nThe application extracts the following information:\n1. Total Balance Due\n2. Payment Due Date\n3. Minimum Payment Due\n4. Card Last 4 Digits\n5. Billing Cycle Dates\n6. Previous Balance\n7. Payments, Credits\n8. Purchases\n9. Interest Charged\n10. Credit Access Line (Credit Limit)\n11. Available Credit\n12. Annual Percentage Rate (APR)\n\n## API Endpoints\n\n### POST /api/parse\nParse uploaded PDF credit card statements\n- **Input**: Form data with `file` (PDF) and `issuer` (string)\n- **Output**: JSON with extracted data fields\n\n### POST /api/insights\nGenerate AI-powered financial insights\n- **Input**: JSON with `extractedData` (object) and `budgetGoal` (string)\n- **Output**: JSON with `insights` (string)\n\n### GET /health\nHealth check endpoint\n- **Output**: JSON with status\n\n## Project Structure\n\n```\n.\n├── main.py                 # Flask backend\n├── requirements.txt        # Python dependencies\n├── package.json           # Node.js dependencies\n├── vite.config.js         # Vite configuration\n├── index.html             # HTML entry point\n├── src/\n│   ├── main.jsx          # React entry point\n│   └── App.jsx           # Main React component\n├── replit.md             # Project documentation\n└── README.md             # This file\n```\n\n## Future Enhancements\n\n1. Support for additional credit card issuers with real parsing\n2. Statement history and comparison features\n3. Data visualization charts\n4. PDF export for insights\n5. Enhanced AI insights with spending category breakdown\n\n## Portfolio Highlights\n\nThis project demonstrates:\n- ✅ Full-stack development (React + Python/Flask)\n- ✅ PDF parsing with pdfplumber and regex\n- ✅ AI integration with retry logic\n- ✅ Professional UI/UX with theme switching\n- ✅ RESTful API design\n- ✅ Comprehensive error handling\n- ✅ Responsive design patterns\n- ✅ State management with React Hooks\n- ✅ Modern build tools (Vite)\n\n## License\n\nThis is a portfolio project created for demonstration purposes.\n\n## Contact\n\nFor questions or feedback about this project, please reach out through the repository.\n","size_bytes":5074},"src/main.jsx":{"content":"import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n)\n","size_bytes":210},"replit.md":{"content":"# AI-Powered Credit Card Statement Analyzer\n\n## Overview\nA professional full-stack web application that analyzes credit card statements using PDF parsing and AI-powered insights. Built with React (frontend) and Flask (backend), this application demonstrates modern web development practices, including responsive design, theme switching, and API integration.\n\n## Purpose\nThis portfolio project showcases:\n- Full-stack development capabilities (React + Python/Flask)\n- PDF parsing using pdfplumber and regex\n- AI integration with Google Gemini API\n- Professional UI/UX with light/dark mode\n- RESTful API design with proper error handling\n- Responsive design with Tailwind CSS\n\n## Technology Stack\n\n### Frontend\n- **React 19** with Hooks for state management\n- **Vite** as build tool and dev server\n- **Tailwind CSS** (CDN) for styling with dark mode support\n- **lucide-react** for icons\n- **Inter font** from Google Fonts\n\n### Backend\n- **Python 3.11**\n- **Flask** web framework with CORS support\n- **pdfplumber** for PDF text extraction\n- **Regular Expressions (regex)** for data parsing\n- **Google Gemini API** for AI-powered financial insights\n- **Exponential backoff retry logic** for API reliability\n\n## Features\n\n### Core Functionality\n1. **PDF Upload & Parsing**\n   - Drag-and-drop file upload interface\n   - Supports multiple credit card issuers (CFPB Sample working, others demo)\n   - Extracts 12+ key data points from statements\n\n2. **Data Extraction**\n   - Total Balance Due\n   - Payment Due Date\n   - Minimum Payment Due\n   - Card Last 4 Digits\n   - Billing Cycle Dates\n   - Previous Balance\n   - Payments, Credits\n   - Purchases\n   - Interest Charged\n   - Credit Access Line (Credit Limit)\n   - Available Credit\n   - Annual Percentage Rate (APR)\n\n3. **Budget Goal Feature**\n   - Optional budget input field\n   - Personalized AI recommendations based on budget\n\n4. **AI-Powered Insights**\n   - Google Gemini API integration\n   - Budget-aware financial recommendations\n   - 2-3 actionable, encouraging insights\n   - Exponential backoff for API reliability\n\n### UI/UX Features\n- **Light/Dark Mode Toggle**\n  - Persisted in localStorage\n  - Smooth transitions\n  - Theme-aware Tailwind classes\n\n- **Professional Design**\n  - Clean, modern interface\n  - Responsive grid layouts\n  - Loading states and spinners\n  - Error handling with user-friendly messages\n  - Rounded corners and shadows\n\n- **Interactive Elements**\n  - \"How It Works\" modal explaining the technology stack\n  - Drag-and-drop file upload\n  - Disabled states for buttons when appropriate\n  - Visual feedback for all interactions\n\n## Project Structure\n```\n.\n├── main.py                 # Flask backend with API endpoints\n├── requirements.txt        # Python dependencies\n├── package.json           # Node.js dependencies\n├── vite.config.js         # Vite configuration\n├── index.html             # HTML entry point\n├── src/\n│   ├── main.jsx          # React entry point\n│   └── App.jsx           # Main React component\n└── replit.md             # This file\n```\n\n## API Endpoints\n\n### POST /api/parse\nParses uploaded PDF credit card statements.\n- **Input**: Form data with `file` (PDF) and `issuer` (string)\n- **Output**: JSON with extracted data fields\n- **Error Handling**: File validation, PDF parsing errors\n\n### POST /api/insights\nGenerates AI-powered financial insights.\n- **Input**: JSON with `extractedData` (object) and `budgetGoal` (string)\n- **Output**: JSON with `insights` (string)\n- **Features**: Exponential backoff retry, timeout handling\n\n### GET /health\nHealth check endpoint.\n- **Output**: JSON with status\n\n## Environment Variables\n- `GEMINI_API_KEY`: Google Gemini API key (required for AI insights)\n\n## Development Setup\n\n### Workflows\n- **Backend**: Runs on port 8000 (Flask server)\n- **Frontend**: Runs on port 5000 (Vite dev server with proxy to backend)\n\n### Running the Application\nBoth workflows start automatically on Replit. The frontend proxies API requests to the backend.\n\n## PDF Parsing Details\n\n### CFPB Sample Parser (Working)\nUses 12+ regex patterns to extract data:\n1. New Balance: `r\"New Balance[:\\s]*\\$?([\\d,]+\\.?\\d*)\"`\n2. Payment Due Date: `r\"Payment Due Date[:\\s]*(\\d{1,2}/\\d{1,2}/\\d{2,4})\"`\n3. Minimum Payment: `r\"Minimum Payment Due[:\\s]*\\$?([\\d,]+\\.?\\d*)\"`\n4. Account Number: `r\"Account Number[:\\s]*.*?(\\d{4})\"`\n5. Billing Cycle: `r\"(?:Opening|Closing).*?Date[:\\s]*(\\d{1,2}/\\d{1,2}/\\d{2,4}).*?(\\d{1,2}/\\d{1,2}/\\d{2,4})\"`\n6. Previous Balance: `r\"Previous Balance[:\\s]*\\$?([\\d,]+\\.?\\d*)\"`\n7. Payments/Credits: `r\"Payments,?\\s*Credits?[:\\s]*\\$?([\\d,]+\\.?\\d*)\"`\n8. Purchases: `r\"Purchases[:\\s]*\\$?([\\d,]+\\.?\\d*)\"`\n9. Interest Charged: `r\"Interest Charged[:\\s]*\\$?([\\d,]+\\.?\\d*)\"`\n10. Credit Limit: `r\"Credit (?:Access )?Line[:\\s]*\\$?([\\d,]+\\.?\\d*)\"`\n11. Available Credit: `r\"Available Credit[:\\s]*\\$?([\\d,]+\\.?\\d*)\"`\n12. APR: `r\"Annual Percentage Rate.*?Purchase.*?([\\d.]+)%\"`\n\n### Demo Parsers\nChase, American Express, Citi, Capital One, and Discover parsers return placeholder \"N/A (Demo)\" values.\n\n## AI Insights Implementation\n\n### System Prompt\nDynamically constructed based on:\n- Comprehensive statement data (12+ fields)\n- User's budget goal (if provided)\n- Instruction to provide 2-3 brief, actionable insights\n\n### Retry Logic\n- **Max Retries**: 5 attempts\n- **Exponential Backoff**: `(2 ** attempt) + random jitter`\n- **Handles**: Rate limits (429), server errors (5xx), timeouts\n- **Timeout**: 30 seconds per request\n\n## Recent Changes\n- **2025-11-09**: Initial implementation with all core features\n  - Complete frontend with React and Tailwind CSS\n  - Complete backend with Flask and pdfplumber\n  - AI integration with Google Gemini API\n  - Light/dark mode with localStorage persistence\n  - Comprehensive error handling and loading states\n\n## User Preferences\n- Clean, professional code with comprehensive comments\n- Modern UI/UX patterns\n- Proper error handling throughout\n- Portfolio-ready implementation quality\n\n## Next Steps (Future Enhancements)\n1. Add support for additional credit card issuers with real parsing\n2. Implement statement history and comparison features\n3. Add data visualization charts\n4. Create PDF export for insights\n5. Enhanced AI insights with spending category breakdown\n","size_bytes":6280},"src/App.jsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { Sun, Moon, Info, Upload, Lightbulb, X, Loader } from 'lucide-react';\n\nfunction App() {\n  const [theme, setTheme] = useState(() => {\n    return localStorage.getItem('theme') || 'dark';\n  });\n  \n  const [showModal, setShowModal] = useState(false);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [issuer, setIssuer] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [extractedData, setExtractedData] = useState(null);\n  const [error, setError] = useState('');\n  const [budgetGoal, setBudgetGoal] = useState('');\n  const [insights, setInsights] = useState('');\n  const [isInsightsLoading, setIsInsightsLoading] = useState(false);\n\n  useEffect(() => {\n    localStorage.setItem('theme', theme);\n    if (theme === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setTheme(prevTheme => prevTheme === 'dark' ? 'light' : 'dark');\n  };\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        setError('Invalid file type. Please upload a PDF file.');\n        setSelectedFile(null);\n        return;\n      }\n      setSelectedFile(file);\n      setError('');\n    }\n  };\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    const file = e.dataTransfer.files[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        setError('Invalid file type. Please upload a PDF file.');\n        setSelectedFile(null);\n        return;\n      }\n      setSelectedFile(file);\n      setError('');\n    }\n  };\n\n  const handleParse = async () => {\n    if (!selectedFile || !issuer) {\n      setError('Please select a file and issuer.');\n      return;\n    }\n\n    setIsLoading(true);\n    setError('');\n    setExtractedData(null);\n    setInsights('');\n\n    const formData = new FormData();\n    formData.append('file', selectedFile);\n    formData.append('issuer', issuer);\n\n    try {\n      const response = await fetch('/api/parse', {\n        method: 'POST',\n        body: formData,\n      });\n\n      const result = await response.json();\n\n      if (response.ok) {\n        setExtractedData(result.data);\n      } else {\n        setError(result.error || 'Failed to parse the PDF. Please try again.');\n      }\n    } catch (err) {\n      setError('Network error. Please check your connection and try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleGetInsights = async () => {\n    if (!extractedData) {\n      setError('No data available. Please parse a statement first.');\n      return;\n    }\n\n    setIsInsightsLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch('/api/insights', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          extractedData: extractedData,\n          budgetGoal: budgetGoal,\n        }),\n      });\n\n      const result = await response.json();\n\n      if (response.ok) {\n        setInsights(result.insights);\n      } else {\n        setError(result.error || 'Failed to generate insights. Please try again.');\n      }\n    } catch (err) {\n      setError('Network error. Please check your connection and try again.');\n    } finally {\n      setIsInsightsLoading(false);\n    }\n  };\n\n  return (\n    <div className={theme}>\n      <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white transition-colors duration-200 py-8 px-4\">\n        <div className=\"max-w-2xl mx-auto\">\n          <header className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6\">\n            <div className=\"flex justify-between items-center\">\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                Credit Card Statement Analyzer\n              </h1>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => setShowModal(true)}\n                  className=\"p-2 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors\"\n                  aria-label=\"How it works\"\n                >\n                  <Info size={20} />\n                </button>\n                <button\n                  onClick={toggleTheme}\n                  className=\"p-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors\"\n                  aria-label=\"Toggle theme\"\n                >\n                  {theme === 'dark' ? <Sun size={20} /> : <Moon size={20} />}\n                </button>\n              </div>\n            </div>\n          </header>\n\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6\">\n            <div\n              onDragOver={handleDragOver}\n              onDrop={handleDrop}\n              className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-500 dark:hover:border-blue-400 transition-colors cursor-pointer\"\n            >\n              <input\n                type=\"file\"\n                accept=\".pdf\"\n                onChange={handleFileChange}\n                className=\"hidden\"\n                id=\"file-upload\"\n              />\n              <label htmlFor=\"file-upload\" className=\"cursor-pointer\">\n                <Upload className=\"mx-auto mb-4 text-gray-400\" size={48} />\n                <p className=\"text-gray-600 dark:text-gray-300 mb-2\">\n                  {selectedFile ? selectedFile.name : 'Drag and drop your PDF here or click to browse'}\n                </p>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  PDF files only\n                </p>\n              </label>\n            </div>\n\n            <div className=\"mt-6\">\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Select Card Issuer\n              </label>\n              <select\n                value={issuer}\n                onChange={(e) => setIssuer(e.target.value)}\n                className=\"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white\"\n              >\n                <option value=\"\">Choose an issuer...</option>\n                <option value=\"CFPB Sample (Working)\">CFPB Sample (Working)</option>\n                <option value=\"Chase (Demo)\">Chase (Demo)</option>\n                <option value=\"American Express (Demo)\">American Express (Demo)</option>\n                <option value=\"Citi (Demo)\">Citi (Demo)</option>\n                <option value=\"Capital One (Demo)\">Capital One (Demo)</option>\n                <option value=\"Discover (Demo)\">Discover (Demo)</option>\n              </select>\n            </div>\n\n            <button\n              onClick={handleParse}\n              disabled={!selectedFile || !issuer || isLoading}\n              className=\"w-full mt-6 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 dark:disabled:bg-gray-600 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n            >\n              {isLoading ? (\n                <>\n                  <Loader className=\"animate-spin\" size={20} />\n                  Parsing...\n                </>\n              ) : (\n                'Parse Statement'\n              )}\n            </button>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded-lg mb-6\">\n              {error}\n            </div>\n          )}\n\n          {extractedData && (\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6\">\n              <h2 className=\"text-xl font-bold mb-4 text-gray-900 dark:text-white\">\n                Extracted Statement Data\n              </h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {Object.entries(extractedData).map(([key, value]) => (\n                  <div\n                    key={key}\n                    className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\"\n                  >\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\n                      {key}\n                    </p>\n                    <p className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                      {value}\n                    </p>\n                  </div>\n                ))}\n              </div>\n\n              <div className=\"mt-6\">\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Budget Goal (Optional)\n                </label>\n                <input\n                  type=\"number\"\n                  placeholder=\"Enter budget goal (e.g., 1000)\"\n                  value={budgetGoal}\n                  onChange={(e) => setBudgetGoal(e.target.value)}\n                  className=\"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 dark:text-white\"\n                />\n              </div>\n\n              <button\n                onClick={handleGetInsights}\n                disabled={isInsightsLoading}\n                className=\"w-full mt-4 px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 dark:disabled:bg-gray-600 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n              >\n                {isInsightsLoading ? (\n                  <>\n                    <Loader className=\"animate-spin\" size={20} />\n                    Generating Insights...\n                  </>\n                ) : (\n                  <>\n                    <Lightbulb size={20} />\n                    Get AI Insights\n                  </>\n                )}\n              </button>\n            </div>\n          )}\n\n          {insights && (\n            <div className=\"bg-gradient-to-r from-purple-100 to-blue-100 dark:from-purple-900 dark:to-blue-900 rounded-xl shadow-lg p-6\">\n              <div className=\"flex items-start gap-3\">\n                <Lightbulb className=\"text-purple-600 dark:text-purple-400 mt-1 flex-shrink-0\" size={24} />\n                <div>\n                  <h3 className=\"text-lg font-bold mb-2 text-gray-900 dark:text-white\">\n                    AI-Powered Financial Insights\n                  </h3>\n                  <p className=\"text-gray-800 dark:text-gray-200 leading-relaxed\">\n                    {insights}\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {showModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full p-6\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                  How It Works\n                </h2>\n                <button\n                  onClick={() => setShowModal(false)}\n                  className=\"p-1 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n                  aria-label=\"Close modal\"\n                >\n                  <X size={24} />\n                </button>\n              </div>\n              <div className=\"text-gray-700 dark:text-gray-300 space-y-3\">\n                <p>\n                  This app uses a <strong>React + Tailwind</strong> frontend and a <strong>Python + Flask</strong> backend.\n                </p>\n                <p>\n                  The backend uses <strong>pdfplumber</strong> and <strong>Regular Expressions (regex)</strong> to parse the PDF and extract key financial data from your credit card statement.\n                </p>\n                <p>\n                  After parsing, you can click <strong>\"Get AI Insights\"</strong>. This sends the extracted data to our backend, which then uses the <strong>Google Gemini API</strong> to generate helpful financial tips based on your statement.\n                </p>\n                <p>\n                  Set a budget goal to receive personalized recommendations tailored to your spending habits!\n                </p>\n              </div>\n              <button\n                onClick={() => setShowModal(false)}\n                className=\"w-full mt-6 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors\"\n              >\n                Got it!\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","size_bytes":13119}},"version":2}